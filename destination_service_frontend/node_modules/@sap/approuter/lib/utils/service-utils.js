'use strict';

var xsenv = require('@sap/xsenv');

module.exports = {

  getServiceCredentials: function(service){
    try {
      return xsenv.cfServiceCredentials({tag: service});
    } catch (error){
      return null;
    }
  },

  getServiceEndPoint: function (serviceCredentials, endPoint) {
    if (endPoint) {
      if (serviceCredentials.endpoints) {
        return {'url': serviceCredentials.endpoints[endPoint] + '/'};
      }
      if (serviceCredentials[endPoint]) {
        return {'url': serviceCredentials[endPoint] + '/'};
      }
    } else {
      return serviceCredentials.url ? {'url': serviceCredentials.url + '/'} : {'url': serviceCredentials.uri + '/'};
    }
  },

  getGrantType: function (serviceCredentials){
    if (serviceCredentials.grant_type){
      return serviceCredentials.grant_type;
    }
    return 'user_token';
  }
};